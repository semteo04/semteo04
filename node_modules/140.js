const http=require('http');
const fs=require('fs');
function loginForm(){
	return `
<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		input{
			color: red;
			position: absolute;
			height: 50px;
			width: 50px;
		}
	</style>
</head>
<body>
	<h1>example</h1>
	<form name="gg" onsubmit="return go();" method="post">
		<table>
			<input id="input" type="submit" onmousemove="move(event)">
			<input type="hidden" name="x" id="x">
			<input type="hidden" name="y" id="y">
		</table>
	</form>
	<script type="text/javascript">
		var inn;
		inn=document.getElementById("input");
		x=document.getElementById("x");
		y=document.getElementById("y");
		function move(E){
			inn.style.left=(E.clientX-25)+'px';
			inn.style.top=(E.clientY-25)+'px';
		}
		function ptoi(x){
			var im=0;
			for(i=0;i<x.length;i++){
				if(x[i]=='p') return im;
				im*=10;
				im+=x[i]-'0';
			}
		}
		function go(){
			vx=ptoi(inn.style.left);
			vy=ptoi(inn.style.top);
			if(vx>=300 && vy>=300){
				x.value=inn.style.left;
				y.value=inn.style.top;
				return true;
			}
			else{
				x.value=inn.style.left;
				y.value=inn.style.top;
				return true;
			}
		}
	</script>
</body>
</html>
	`;
}
http.createServer((req,res)=>{
	if(req.method==='GET'){
		res.end(loginForm());
	}
	else if(req.method==='POST'){
		req.on('data',(data)=>{
			res.writeHead(200,{'Content-Type':'text/html'});
			res.end(data);
			console.log(`${req.method}방식`);
		});
	}
}).listen(5000,()=>{
	console.log('OK');
});